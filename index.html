<!DOCTYPE html>
<html>
	<head>
		<title>HTML5 Tetris</title>

		<link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">
		<link rel="stylesheet" type="text/css" href="css/styles.css">
		<link rel="stylesheet" type="text/css" href="css/blockrain.css">
		<link rel="stylesheet" type="text/css" href="css/calibration.css">
	</head>
	<body>
		<div id="calibration"></div>
		<div id="container">
			<div class="panel">
				<div class="game"></div>
			</div>
		</div>

		<script src="scripts/jquery.js"></script>
		<script src="scripts/blockrain.jquery.js"></script>
		<script src="scripts/events.js"></script>
		<script src="scripts/mousetrap.js"></script>
        <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
        <script src="scripts/server-hooks.js"></script>
		<script>
			window.export = function () {};

			var game = $('.game').blockrain({
				theme: 'gameboy'
			});

			Mousetrap.bind('up', function () {
				window.controls.rotateClockwise()
			});
			Mousetrap.bind('down', function () {
				window.controls.moveDown()
			});
			Mousetrap.bind('right', function () {
				window.controls.moveRight()
			});
			Mousetrap.bind('left', function () {
				window.controls.moveLeft()
			});

			var delay = 0;
			gameEvents.on('gameStart', function () {
				window.export = function (data) {
					if (delay > 10) {
						delay = 0;
						server.emit('opponent update', data);
					} else {
						delay++;
					}
				}
			});

			gameEvents.on('gamePause', function () {
				window.export = function () {}
			});
		</script>

		<!-- Leap Motion -->
		<script src="http://js.leapmotion.com/leap-0.6.3.min.js"></script>
		<script src="scripts/nleap.js"></script>
		<script src="scripts/nleap-handlers.js"></script>
		<script src="scripts/calibration.js"></script>
		<!-- Leap Motion End -->
	</body>
</html>
